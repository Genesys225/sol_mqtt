(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t){e.exports=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}},126:function(e,t,a){e.exports=a.p+"static/media/ajax_loader_blue_256.14df1151.gif"},129:function(e,t,a){e.exports=a(327)},134:function(e,t,a){},186:function(e,t){},327:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(112),o=a.n(s),l=(a(134),a(6)),c=a(7),i=a(9),u=a(8),d=a(10),m=a(330),p=a(329),h=a(12),b=a(13),v=a(15),E=function(e){return{type:"CACHE_IN_PROGRESS",payload:e}},g=function(e){return{type:"GET_ERRORS",payload:e.response.data}},f=a(115),O=a(116),y=a.n(O),N=a(16),j=a(117),S=a.n(j),C={isAuthenticated:!1,user:{}},_={preferences:{}},w={},k={nodes:{}},T=a(128),R={caching:!0},D=Object(b.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(N.a)({},e,{isAuthenticated:!S()(t.payload),user:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_NODE_HANDLE":return Object(N.a)({},e);case"SET_USER_PREFERENCES":return Object(N.a)({},e,{preferences:t.payload});default:return e}},telemetry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NODE_2NODES":return Object(N.a)({},e,{nodes:t.payload});case"ADD_TYPE_2NODE":var a=t.payload,n=a.name,r=a.type;return e.nodes[n]=r,Object(N.a)({},e);case"SET_VALUE_2NODE_TYPE":var s=t.payload,o=s.name,l=s.type,c=s.value;return e.nodes[o][l]&&(e.nodes[o][l].value=c),Object(N.a)({},e);default:return e}},sensors:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CACHE_SENSOR_TELEMETRY":return Object(N.a)({},t,a.payload);case"SET_NODE_NAME":var n=a.payload,r=n.nodeName,s=n.data;return t[r]=Object.assign(t[r],s),Object(N.a)({},t);case"SET_SENSOR_TYPE":var o=a.payload,l=o.nodeName,c=o.sensorType,i=o.from,u=o.to,d=o.sampleData;return t[l][c].from=i,t[l][c].to=u,(e=t[l][c].sampleData).unshift.apply(e,Object(T.a)(d)),Object(N.a)({},t);case"SET_SENSOR_SAMPLE_RANGE":return t;case"CACHE_IN_PROGRESS":return Object(N.a)({},t,{caching:a.payload});default:return t}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;case"CLEAR_ERRORS":return{};default:return e}}}),x=a(70),A=a(118),P=a.n(A),L=[f.a,y.a,function(e){return function(t){return function(a){var n=a.type,r=!1;"SET_NEW_TELEMETRY"===n&&(r=function(e,t){var a=t.type,n=t.payload,r=e.getState().telemetry.nodes;if("SET_NEW_TELEMETRY"===a){var s=n,o=s.name,l=s.type,c=s.value,i=s.units;n=r;var u=Object(v.a)({},l,{value:c+i});return r[o]?r[o][l]?(n[o][l]=Object.assign(r[o][l],u[l]),{type:"SET_VALUE_2NODE_TYPE",payload:{name:o,type:l,value:c+i}}):(n[o]=Object.assign(r[o],u),{type:"ADD_TYPE_2NODE",payload:n[o]}):{type:"ADD_NODE_2NODES",payload:n=Object.assign(n,Object(v.a)({},o,Object(v.a)({},l,{value:c+i})))}}return!1}(e,a)),"SET_NEW_LOG_DATA"===n&&(r=function(e,t){var a=e.getState().sensors,n=e.dispatch,r=t.payload,s=r.sonsorCreds,o=r.axiosCallDB,l=r.cachingProgress,c=s.nodeName,i=s.sensorType,u=s.from,d=s.to;if(E(!0),Object.getOwnPropertyNames(a).indexOf(c)>-1)if(Object.getOwnPropertyNames(a[c]).indexOf(i)>-1){if(a[c][i].from<=u)return l(c,i),E(!1);a[c][i].from>u&&(s.newTo=a[c][i].from,o(s).then(function(e){return n({type:"SET_SENSOR_TYPE",payload:{nodeName:c,sensorType:i,from:u,to:d,sampleData:e}}),l(c,i),E(!1)}).catch(function(e){return g(e)}))}else o(s).then(function(e){return n({type:"SET_NODE_NAME",payload:{nodeName:c,data:Object(v.a)({},i,{from:u,to:d,sampleData:e})}}),l(c,i),E(!1)}).catch(function(e){return g(e)});else o(s).then(function(e){return n({type:"CACHE_SENSOR_TELEMETRY",payload:Object(v.a)({},c,Object(v.a)({},i,{from:u,to:d,sampleData:e}))}),l(c,i),E(!1)}).catch(function(e){return g(e)})}(e,a)),r&&(a=r),t(a)}}}],M={key:"root",storage:P.a},U=Object(x.a)(M,D),F=Object(b.e)(U,Object(b.d)(b.a.apply(void 0,L),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),G=Object(x.b)(F),H=a(50),I=a.n(H),V=a(19),W=a.n(V),Y=function(e){e?W.a.defaults.headers.common.Authorization=e:delete W.a.defaults.headers.common.Authorization},z=function(e){return function(t){W.a.get("/api/users/get-preferences/".concat(e)).then(function(e){t(B(e.data))}).catch(function(e){return t({type:"GET_ERRORS",payload:e})})}},B=function(e){return function(t){t({type:"SET_USER_PREFERENCES",payload:e})}},Z=function(e){return function(t){W.a.post("/api/users/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),Y(a);var n=I()(a);t(X(n)),t(z(n.id))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}},X=function(e){return{type:"SET_CURRENT_USER",payload:e}},$=function(){return function(e){localStorage.removeItem("jwtToken"),G.purge(),Y(!1),e(X({})),e(B({}))}},q=a(119),J=a(328),K=a(162);var Q=a(120),ee=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onLogoutClick",value:function(e){e.preventDefault(),this.props.logoutUser(this.props.persistor)}},{key:"render",value:function(){var e,t=this.props.auth,a=t.isAuthenticated,n=t.user,s="";a&&(s="base64,"+(e=n.identicon,new K(e+77,200).toString()));var o=r.a.createElement("div",{className:"collapse navbar-collapse",id:"mobile-nav"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{className:"nav-link",to:"/manager"}," ","Manager"))),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{to:"/",onClick:this.onLogoutClick.bind(this),className:"nav-link text-black-50"},r.a.createElement("img",{className:"rounded",style:{width:"30px",marginRight:"5px"},src:"data:image/png;"+s,alt:n.userName,circle:"true"})," ","Logout")))),l=r.a.createElement("div",{className:"collapse navbar-collapse",id:"mobile-nav"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{className:"nav-link",to:"/dashboard"}," ","dashboard"))),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item "},r.a.createElement(J.a,{className:"nav-link ",to:"/create"},"Create User")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{className:"nav-link",to:"/login"},"Login"))));return r.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark bg-primary mb-4 "},r.a.createElement("div",{className:"container"},r.a.createElement(J.a,{className:"navbar-brand text-white-50",to:"/"},r.a.createElement(Q.a,{className:"mb-2"})," SOL Manager"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#mobile-nav"},r.a.createElement("span",{className:"navbar-toggler-icon"})),a?o:l))}}]),t}(n.Component),te=Object(h.b)(function(e){return{auth:e.auth}},{logoutUser:$})(ee);a(78);function ae(){return r.a.createElement("footer",{className:"footer mt-5 p-4 text-center bg-primary"},"Copiright \xa9 ",(new Date).getFullYear," SOL App")}var ne=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"render",value:function(){return r.a.createElement("div",{className:"landing"},r.a.createElement("div",{className:"dark-overlay landing-inner text-light"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h1",{className:"display-3 mb-4"},"SOL Manager"),r.a.createElement("p",{className:"lead"}," ","Create a user or login in order to manage/view you'r site/node/s data"),r.a.createElement("hr",null),r.a.createElement(J.a,{to:"/create",className:"btn btn-lg btn-light mr-2"},"Create User"),r.a.createElement(J.a,{to:"/login",className:"btn btn-lg text-dark btn-primary "},"Login"))))))}}]),t}(n.Component),re=Object(h.b)(function(e){return{nodes:e.telemetry.nodes,auth:e.auth}})(ne),se=a(4),oe=a(331),le=a(28),ce=a.n(le),ie=function(e){var t=e.name,a=e.placeholder,n=e.value,s=(e.label,e.error),o=e.info,l=e.type,c=e.onChange,i=e.disabled;return r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{value:n,className:ce()("form-control form-control-lg",{"is-invalid":s}),type:l,placeholder:a,name:t,onChange:c,disabled:i}),o&&r.a.createElement("small",{className:"form-text text-muted"},o),s&&r.a.createElement("div",{className:"invalid-feedback"},s))};ie.defaultProps={type:"text"};var ue=ie,de=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={userName:"",email:"",password:"",password2:"",errors:{}},e.onChange=e.onChange.bind(Object(se.a)(Object(se.a)(e))),e.onSubmit=e.onSubmit.bind(Object(se.a)(Object(se.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"onChange",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={userName:this.state.userName,email:this.state.email,password:this.state.password,password2:this.state.password2};this.props.registerUser(t,this.props.history)}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h1",{className:"display-4 text-center text-black-50"},"Sign Up"),r.a.createElement("p",{className:"lead text-center text-white-50"},"Create your DevConnector account"),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement(ue,{placeholder:"User name",name:"userName",value:this.state.userName,onChange:this.onChange,error:e.userName}),r.a.createElement(ue,{placeholder:"Email Address",name:"email",type:"email",value:this.state.email,onChange:this.onChange,error:e.email}),r.a.createElement(ue,{placeholder:"Password",name:"password",type:"password",value:this.state.password,onChange:this.onChange,error:e.password}),r.a.createElement(ue,{placeholder:"Confirm Password",name:"password2",type:"password",value:this.state.password2,onChange:this.onChange,error:e.password2}),r.a.createElement("input",{type:"submit",className:"btn btn-primary text-black-50 btn-block mt-4"}))))))}}]),t}(n.Component),me=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){W.a.post("/api/users/register",e).then(function(e){return t.push("/login")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(oe.a)(de)),pe=a(2),he=a.n(pe),be=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={password:"",userName:"",errors:{}},e.onChange=e.onChange.bind(Object(se.a)(Object(se.a)(e))),e.onSubmit=e.onSubmit.bind(Object(se.a)(Object(se.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"onChange",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={userName:this.state.userName,password:this.state.password};this.props.loginUser(t)}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"login "},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h1",{className:"display-4 text-center text-black-50"},"Log In"),r.a.createElement("p",{className:"lead text-center text-white-50"},"Login to your managemant account"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(ue,{value:this.state.userName,placeholder:"User name",name:"userName",onChange:this.onChange,error:e.userName}),r.a.createElement(ue,{value:this.state.password,placeholder:"password",name:"password",type:"password",onChange:this.onChange,error:e.password}),r.a.createElement("input",{type:"submit",className:"btn btn-info btn-block mt-4"}))))))}}]),t}(n.Component);Z.propTypes={loginUser:he.a.func.isRequired,auth:he.a.object.isRequired,errors:he.a.object.isRequired};var ve=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:Z})(be),Ee=a(123),ge=a.n(Ee)()("http://localhost:5001"),fe=a(127),Oe=a(124),ye=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={chartData:{datasets:[{label:"",data:[0,0]}]}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dataSet;if(0!==e){var t=e.map(function(e){return e._id.day+"/"+e._id.month+" "+e._id.hour+":"+(e._id.minute<10?"0"+e._id.minute:e._id.minute)}),a=e.map(function(e){return e.avgValue});this.setState({chartData:{labels:t,datasets:[{label:"Average sampled",data:a}]}})}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Oe.a,{data:this.state.chartData,width:100,height:80,options:{}}))}}]),t}(n.Component),Ne=a(126),je=a.n(Ne),Se=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:je.a,style:{width:"200px",margin:"auto",display:"block"},alt:"Loadind"}))},Ce=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentWillReceiveProps=function(e){a.setState({title:e.title,sensor:e.sensor,dataSet:e.dataSet,cacheInProgress:e.cacheInProgress})},a.state={isValid:!0,errors:null},a.toHandler=a.toHandler.bind(Object(se.a)(Object(se.a)(a))),a.fromHandler=a.fromHandler.bind(Object(se.a)(Object(se.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"fromHandler",value:function(e){this.setState({isValid:/^[A-Za-z][A-Za-z0-9-_]*$/.test(e.target.value),errors:null,newTitle:e.target.value})}},{key:"toHandler",value:function(e){this.setState({isValid:/^[A-Za-z][A-Za-z0-9-_]*$/.test(e.target.value),errors:null,newTitle:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.sensor,n=(e.errors,e.dataSet),s=e.cacheInProgress;return r.a.createElement("div",{className:"modal fade bd-example-modal-lg",id:t+"_"+a,tabIndex:"-1",role:"dialog"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Node: ",t)),r.a.createElement("div",{className:"modal-body"}),s||!n?r.a.createElement(Se,null):r.a.createElement(ye,{dataSet:n}),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",id:"#"+t+a},"Close")))))}}]),t}(n.Component),_e=function(e){var t=e.nodeName,a=e.sensorType,n=e.from,r=e.to,s=e.newTo;return new Promise(function(e,o){W.a.get("/api/telemetry/get-between/".concat(t,"/").concat(a,"/").concat(n,"/").concat(s||r)).then(function(t){return e(t.data)}).catch(function(e){return o(e)})})},we=Object(b.d)(Object(h.b)(function(e){return{sensors:e.sensors,user:e.user,auth:e.auth}},{fetchGraphData:function(e,t){return function(a){a({type:"SET_NEW_LOG_DATA",payload:{sonsorCreds:e,axiosCallDB:_e,cachingProgress:t}})}}}),function(e){return function(t){function a(e){var t;return Object(l.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).cachingProgress=function(e,a){var n=t.props.sensors[e][a].sampleData;t.setState({sampleData:n})},t.componentWillReceiveProps=function(e){var a=e.sensor,n=e.value;switch(a){case"temperture":parseFloat(n.split("(")[0])>28?t.setState({badgeClassname:"badge-danger"}):parseFloat(n.split("(")[0])>26?t.setState({badgeClassname:"badge-warning"}):parseFloat(n.split("(")[0])<22?t.setState({badgeClassname:"badge-primary"}):t.setState({badgeClassname:"badge-success"});break;case"humidity":parseFloat(n.split("(")[0])>55?t.setState({badgeClassname:"badge-danger"}):parseFloat(n.split("(")[0])>45?t.setState({badgeClassname:"badge-warning"}):parseFloat(n.split("(")[0])<20?t.setState({badgeClassname:"badge-secondary"}):t.setState({badgeClassname:"badge-success"});break;case"co2":parseFloat(n.split("(")[0])>1600?t.setState({badgeClassname:"badge-danger"}):parseFloat(n.split("(")[0])>1300?t.setState({badgeClassname:"badge-warning"}):parseFloat(n.split("(")[0])<800?t.setState({badgeClassname:"badge-secondary"}):t.setState({badgeClassname:"badge-success"});break;case"light":parseFloat(n.split("(")[0])<10?t.setState({badgeClassname:"badge-dark"}):parseFloat(n.split("(")[0])<40?t.setState({badgeClassname:"badge-secondary"}):parseFloat(n.split("(")[0])<80?t.setState({badgeClassname:"badge-danger"}):parseFloat(n.split("(")[0])<150?t.setState({badgeClassname:"badge-warning"}):t.setState({badgeClassname:"badge-success"})}},t.state={sampleData:0,badgeClassname:""},t.handlGraphClick=t.handlGraphClick.bind(Object(se.a)(Object(se.a)(t))),t}return Object(d.a)(a,t),Object(c.a)(a,[{key:"handlGraphClick",value:function(e,t){var a=this.props.user.preferences.nodes;a.length>0&&(e=a.find(function(t){return t.handle===e}).node.name);var n={nodeName:e,sensorType:t,from:1542374373e3,to:1542465373e3};this.props.fetchGraphData(n,this.cachingProgress)}},{key:"render",value:function(){var t=this,a=this.props.auth.isAuthenticated,n=this.props,s=n.title,o=n.sensor,l=this.state,c=l.sampleData,i=l.cacheInProgress;return r.a.createElement(e,Object.assign({},this.props,{badgeClassname:this.state.badgeClassname,displayGraphButton:!!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,{title:s,sensor:o,dataSet:c,cacheInProgress:i}),r.a.createElement("button",{className:"btn btn-outline-secondary col-md-2",type:"button","data-toggle":"modal","data-target":"#"+s+"_"+o,onClick:function(){return t.handlGraphClick(s,o)}},r.a.createElement(fe.a,null))," ")}))}}]),a}(n.Component)})(function(e){var t=e.badgeClassname,a=e.displayGraphButton,n=e.sensor,s=e.value,o=a?"col-md-10":"col-md-12";return r.a.createElement("ul",{className:"list-group"},r.a.createElement("div",{className:"row justify-content-start"},r.a.createElement("li",{key:n,className:ce()("list-group-item d-flex justify-content-between align-items-center",o)},n,r.a.createElement("span",{className:ce()("badge  badge-pill",t)},s)),a))}),ke=Object(b.d)(Object(h.b)(function(e){return{user:e.user,auth:e.auth}},{createOrUpdateHandel:function(e,t){return function(a){W.a.post("/api/users/assign-handle/".concat(e.title),e).then(function(n){t(n.statusText),a(z(e.user_id))}).catch(function(e){t(e.response.data.errors),a({type:"GET_ERRORS",payload:e.response.data})})}}}),function(e){return function(t){function a(e){var t;return Object(l.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).componentWillReceiveProps=function(e){var a=t.props.title;if(e.user.preferences.nodes){var n=e.user.preferences.nodes;n.length>0&&(t.handle=n.find(function(e){return e.node.name===a}).handle)}else t.handle=a},t.state={},t.saveModalDetails=t.saveModalDetails.bind(Object(se.a)(Object(se.a)(t))),t}return Object(d.a)(a,t),Object(c.a)(a,[{key:"saveModalDetails",value:function(e,t){var a={user_id:this.props.auth.user.id,title:this.props.title,handle:e};console.log(a),this.props.createOrUpdateHandel(a,t)}},{key:"render",value:function(){var t=this.props.auth.isAuthenticated;return r.a.createElement(e,Object.assign({},this.props,{title:this.handle,saveModalDetails:t?this.saveModalDetails:null}))}}]),a}(n.Component)}),Te=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentWillReceiveProps=function(e){a.setState({title:e.title})},a.state={isValid:!0,errors:null},a.handleSave=a.handleSave.bind(Object(se.a)(Object(se.a)(a))),a.inPutHandler=a.inputHandler.bind(Object(se.a)(Object(se.a)(a))),a.saveCallback=a.saveCallback.bind(Object(se.a)(Object(se.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"saveCallback",value:function(e){"OK"===e?document.getElementById("#"+this.state.title).click():this.setState({errors:e.toString(),isValid:!1})}},{key:"handleSave",value:function(){var e=this.state.newTitle;this.props.saveModalDetails(e,this.saveCallback)}},{key:"inputHandler",value:function(e){this.setState({isValid:/^[A-Za-z][A-Za-z0-9-_]*$/.test(e.target.value),errors:null,newTitle:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.isValid,s=t.errors;return r.a.createElement("div",{className:"modal modal-primary fade",id:a,tabIndex:"-1",role:"dialog"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Node: ",a),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Handle:")),r.a.createElement("input",{type:"text",className:ce()("form-control",{"is-invalid":!n}),placeholder:a,"aria-label":a,onChange:function(t){return e.inputHandler(t)}}),!n&&r.a.createElement("div",{className:"invalid-feedback"},s||"Only letters and/or numbers alowed"))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",id:"#"+a},"Close"),r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:!n,onClick:function(){e.handleSave()}},"Save changes")))))}}]),t}(n.Component),Re=ke(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.items,t=this.props,a=t.saveModalDetails,n=t.values,s=t.title;e=e.filter(function(e){return"undefined"!==e});var o=a?r.a.createElement("button",{className:"btn btn-sm btn-outline-secondary float-right","data-toggle":"modal","data-target":"#"+s},"Edit"):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{title:s,handle:s,saveModalDetails:a&&a}),r.a.createElement("div",{className:"col col-md-4 col-sm-auto align-self-center"},r.a.createElement("div",{className:"card bg-light mb-3 "},r.a.createElement("div",{className:"card-header"},s,o),r.a.createElement("div",{className:"card-body"},e.sort().map(function(e,t){return r.a.createElement(we,{key:e,title:s,sensor:e,value:n[e].value})})))))}}]),t}(n.Component)),De=a(51),xe=Object(De.a)(function(e){return e.telemetry},function(e){var t=Object.getOwnPropertyNames(e.nodes);return t=t.sort().filter(function(e){return"undefined"!==e})}),Ae=Object(De.a)(function(e){return e.telemetry},function(e){return e.nodes}),Pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.props.subscribe2RegisteredNodes()},a.state={names:null,nodes:{"":""}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.nodes,a=e.names,n=r.a.createElement(Se,null);return null!==a&&a.length>0&&(n=r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row align-items-start justify-content-center"},a.map(function(e){return r.a.createElement(Re,{key:e,title:e,items:Object.getOwnPropertyNames(t[e]),values:t[e]})})))),r.a.createElement(r.a.Fragment,null,n)}}]),t}(n.Component),Le={subscribe2RegisteredNodes:function(){return function(e){ge.on("event",function(t){e({type:"SET_NEW_TELEMETRY",payload:t})})}}},Me=Object(h.b)(function(e){return{names:xe(e),nodes:Ae(e),auth:e.auth,errors:e.errors}},Le)(Pe);if(localStorage.jwtToken){Y(localStorage.jwtToken);var Ue=I()(localStorage.jwtToken);F.dispatch(X(Ue)),F.dispatch(z(Ue.id));var Fe=Date.now()/1e3;Ue.exp<Fe&&(F.dispatch($()),window.location.href="/login")}var Ge=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{store:F},r.a.createElement(q.a,{loading:null,persistor:G},r.a.createElement(m.a,null,r.a.createElement("div",{className:"App "},r.a.createElement(te,null),r.a.createElement(p.a,{exact:!0,path:"/",component:re}),r.a.createElement(p.a,{exact:!0,path:"/dashboard",component:Me}),r.a.createElement("div",{className:"container"},r.a.createElement(p.a,{exact:!0,path:"/create",component:me}),r.a.createElement(p.a,{exact:!0,path:"/login",component:ve})),r.a.createElement(ae,null)))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},78:function(e,t,a){}},[[129,2,1]]]);
//# sourceMappingURL=main.3288daea.chunk.js.map